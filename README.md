# v1

## 開發原因

- 個人有學習需求, 並且正在尋找最好開發的 bot 交互方式
- 想善用家中高階顯示卡算力, 讓自己在外也能使用 AI 服務

## 技術堆疊

- 使用 NestJs, Telegram Bot API 為核心
- 整合 EdgeTTS, WhisperSTT, AzurePronunciation, Ollama-DeepSeeker(提供語言翻譯) 等 AI 相關服務
- 使用 Redis 作為儲存
- 使用 FFmpeg 處理音訊與格式轉換

## 提供功能:

- 語音合成: 使用者輸入文字，系統會根據設定的語言（如中、英、法等）生成語音檔案 。
- 語音測評: 使用者上傳錄音，系統會對接 Azure 服務進行發音準確度評分
- 文字翻譯: 整合 Ollama 提供精確的語料翻譯，並具備提示詞（Prompt）安全檢查機制，防止注入攻擊 。
- 會員與選單管理: 透過 Telegram 按鈕介面設定偏好語言及查看個人狀態 。

## 架構缺陷

- 使用同步處理長時間任務，可能導致效能瓶頸
- 使用 long-polling 方式接收 Telegram 更新，可能導致延遲和資源浪費
- 缺乏分布式處理能力，無法有效擴展以應對大量用戶
- 使用 vibe coding 開發, 不使用 TDD 與 SDD, 導致代碼可能過度工程且缺乏測試覆蓋
- 無 ACID 交易支持，可能導致資料不一致問題
- 無融斷機制，當外部服務不可用時可能導致系統崩潰
- 無監控與日誌系統，難以追蹤錯誤和性能問題

# v2

## 改進方向

- 改用 monorepo 與 microservices 架構，將不同功能模組化，提升可維護性與擴展性
- 添加 單元測試
- 添加 可觀測性以及監控工具
- 添加 消息隊列
- 添加 持久關聯資料庫
- 添加 Logto 作為身份驗證解決方案
- 添加 CI/CD 流程，確保代碼質量和快速部署
- 改用 webhook 方式接收 Telegram 更新，減少延遲和資源浪費
